<%- include('partials/header.ejs') %>
<!-- Default form contact -->

<form class="text-center border border-light p-5 mainForm" action="/searchBook" >

    <p class="h4 mb-4">Search Books</p>

    <!-- Title -->
    <input type="text" id="defaultContactFormName" class="form-control mb-4" placeholder="Title" name="title">

    <!-- Author -->
    <input type="email" id="defaultContactFormEmail" class="form-control mb-4" placeholder="Author" name="author">

    <!-- Genre -->
    <label>Genre</label>
    <select class="browser-default custom-select mb-4">
        <option value="" disabled>Choose option</option>
        <option value="1" selected>Action and Adventure</option>
        <option value="2">Detective and Mystery</option>
        <option value="3">Horror</option>
        <option value="4">Science Fiction (Sci-Fi)</option>
    </select>

    <!-- ISBN -->
    <input type="email" id="defaultContactFormEmail" class="form-control mb-4" placeholder="ISBN" name="ISBN">

    <button class="btn btn-info btn-block" type="submit">Send</button>

</form>

<div id="server-results"></div>

<script>

$(".mainForm").on("submit", function(e) { 
    e.preventDefault();
    var form = $(this);
    var url = form.attr('action');

    $.ajax({
           type: "GET",
           dataType : 'json',
           url: url,
           data: form.serialize(), // serializes the form's elements.
           success: function(data)
           {
            console.log(data)
            $("#server-results").html(data[0].title);
           }
         });

})

</script>

<%- include('partials/footer.ejs') %>